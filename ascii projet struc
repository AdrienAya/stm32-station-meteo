â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    STATION MÃ‰TÃ‰O V1 - ARCHITECTURE                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MATÃ‰RIEL (HARDWARE)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              STM32F446
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                               â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
        â”‚  â”‚         RCC (Horloges)              â”‚      â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚      â”‚
        â”‚  â”‚  â”‚GPIOA â”‚GPIOB â”‚GPIOB â”‚ GPIOCâ”‚TIM2  â”‚      â”‚
        â”‚  â”‚  â””â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”˜      â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€     â”‚
        â”‚        â”‚      â”‚       â”‚      â”‚      â”‚         â”‚
        â”‚     â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ–¼â”€â”€â”€â”€â” â”Œâ–¼â”€â”€â”€â” â”Œâ–¼â”€â”€â”€â” â”Œâ–¼â”€â”€â”€â”€â”    â”‚
        â”‚     â”‚      â”‚ â”‚(SCL)â”‚ â”‚(SDAâ”‚ â”‚LED â”‚ â”‚ 2   â”‚    â”‚
        â”‚     â”‚ DHT  â”‚ â”‚ I2C â”‚ â”‚ I2Câ”‚ â”‚    â”‚ â”‚Âµs   â”‚    â”‚
        â”‚     â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”¬â”€â”€â”˜ â””â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜    â”‚
        â”‚        â”‚        â”‚      â”‚      â”‚               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚        â”‚      â”‚      â”‚
                 â”‚     â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”  â”‚
                 â”‚     â”‚   I2C Bus   â”‚  â”‚
                 â”‚     â”‚  (2 fils)   â”‚  â”‚
                 â”‚     â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                 â”‚        â”‚             â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”   â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”
          â”‚ DHT11  â”‚   â”‚  OLED     â”‚ â”‚ LED â”‚
          â”‚ Capteurâ”‚   â”‚  0.96"    â”‚ â”‚Debugâ”‚
          â”‚        â”‚   â”‚  I2C      â”‚ â”‚     â”‚
          â”‚ Temp   â”‚   â”‚ 128x64    â”‚ â”‚ ğŸ’¡  â”‚
          â”‚  +     â”‚   â”‚Monochrome â”‚ â””â”€â”€â”€â”€â”€â”˜
          â”‚ Humid  â”‚   â”‚           â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LOGICIEL (SOFTWARE)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   main.c     â”‚
                         â”‚  (Boucle)    â”‚
                         â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
         â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
         â–¼                   â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ gpio.c  â”‚        â”‚  i2c.c  â”‚        â”‚timer.c  â”‚
    â”‚         â”‚        â”‚         â”‚        â”‚         â”‚
    â”‚GPIO_Initâ”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚I2C_Init â”‚        â”‚Timer    â”‚
    â”‚_Clocks  â”‚        â”‚         â”‚        â”‚_Init    â”‚
    â”‚         â”‚        â”‚I2C_Startâ”‚        â”‚         â”‚
    â”‚GPIO_Initâ”‚        â”‚I2C_Writeâ”‚        â”‚Get_Âµs   â”‚
    â”‚_I2C_Pinsâ”‚        â”‚I2C_Stop â”‚        â”‚Reset    â”‚
    â”‚         â”‚        â”‚         â”‚        â”‚         â”‚
    â”‚GPIO_Initâ”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚_DHT_Pin â”‚             â”‚                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                  â”‚
                            â–¼                  â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚  lcd.c  â”‚        â”‚ dht11.c â”‚
                       â”‚         â”‚        â”‚         â”‚
                       â”‚LCD_Init â”‚        â”‚DHT_Read â”‚
                       â”‚LCD_Clearâ”‚        â”‚DHT_Parseâ”‚
                       â”‚LCD_Writeâ”‚        â”‚         â”‚
                       â”‚LCD_Pos  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            FLOW PRINCIPAL                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    START
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Init RCC  â”‚ â†’ Activer horloges GPIOA, GPIOB, I2C1, TIM2
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Init GPIO â”‚ â†’ Configurer PA0, PB6, PB7 (MODER, AFR, OTYPER...)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Init I2C  â”‚ â†’ Configurer I2C1 (vitesse, mode maÃ®tre)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Init LCD  â”‚ â†’ SÃ©quence init LCD via I2C
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Init Timerâ”‚ â†’ PSC=179 (1Âµs), ARR=max, Enable
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚      BOUCLE INFINIE             â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
   â”‚  â”‚                         â”‚    â”‚
   â”‚  â”‚ 1. Lire DHT11 (PA0)     â”‚    â”‚
   â”‚  â”‚    â””â”€ Utilise Timer     â”‚    â”‚
   â”‚  â”‚                         â”‚    â”‚
   â”‚  â”‚ 2. Parser donnÃ©es       â”‚    â”‚
   â”‚  â”‚    â””â”€ Temp + HumiditÃ©   â”‚    â”‚
   â”‚  â”‚                         â”‚    â”‚
   â”‚  â”‚ 3. Afficher sur LCD     â”‚    â”‚
   â”‚  â”‚    â””â”€ Via I2C           â”‚    â”‚
   â”‚  â”‚                         â”‚    â”‚
   â”‚  â”‚ 4. Attendre 2 secondes  â”‚    â”‚
   â”‚  â”‚                         â”‚    â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
   â”‚           â”‚                     â”‚
   â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REGISTRES CLÃ‰S PAR MODULE                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GPIO (PB6/PB7 - I2C) :
  RCC->AHB1ENR    : Bit 1 (GPIOBEN)
  GPIOB->MODER    : Bits 12-15 (0b1010 = AF+AF)
  GPIOB->AFR[0]   : Bits 24-31 (0x44 = AF4+AF4)
  GPIOB->OTYPER   : Bits 6-7 (0b11 = OD+OD)
  GPIOB->PUPDR    : Bits 12-15 (0b0101 = PU+PU)
  GPIOB->OSPEEDR  : Bits 12-15 (0b1111 = HS+HS)

GPIO (PA0 - DHT11) :
  RCC->AHB1ENR    : Bit 0 (GPIOAEN)
  GPIOA->MODER    : Bits 0-1 (0b00 = INPUT)
  GPIOA->PUPDR    : Bits 0-1 (0b01 = Pull-up)

I2C1 :
  RCC->APB1ENR    : Bit 21 (I2C1EN)
  I2C1->CR1       : PE (Enable), START, STOP, ACK
  I2C1->CR2       : FREQ (45 MHz APB1)
  I2C1->CCR       : Clock control (100 kHz)
  I2C1->TRISE     : Rise time
  I2C1->DR        : Data register (lecture/Ã©criture)
  I2C1->SR1       : Status (TXE, RXNE, BTF, AF...)
  I2C1->SR2       : Status (BUSY, MSL, TRA...)

TIMER2 :
  RCC->APB1ENR    : Bit 0 (TIM2EN)
  TIM2->PSC       : 179 (divise par 180 â†’ 1 tick = 1Âµs)
  TIM2->ARR       : 0xFFFFFFFF (max 32-bit)
  TIM2->CNT       : Compteur (lecture temps Ã©coulÃ©)
  TIM2->CR1       : CEN (Counter Enable)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FICHIERS ET FONCTIONS                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

gpio.h / gpio.c :
  â””â”€ void GPIO_Init_Clocks(void)
  â””â”€ void GPIO_Init_I2C_Pins(void)
  â””â”€ void GPIO_Init_DHT11_Pin(void)

i2c.h / i2c.c :
  â””â”€ void I2C_Init(void)
  â””â”€ void I2C_Start(void)
  â””â”€ void I2C_Write(uint8_t data)
  â””â”€ void I2C_WriteAddr(uint8_t addr)
  â””â”€ void I2C_Stop(void)
  â””â”€ uint8_t I2C_CheckAck(void)

lcd.h / lcd.c :
  â””â”€ void LCD_Init(void)
  â””â”€ void LCD_Clear(void)
  â””â”€ void LCD_SetCursor(uint8_t row, uint8_t col)
  â””â”€ void LCD_WriteChar(char c)
  â””â”€ void LCD_WriteString(char *str)
  â””â”€ void LCD_WriteNumber(int num)

dht11.h / dht11.c :
  â””â”€ DHT11_Data DHT11_Read(void)
  â””â”€ uint8_t DHT11_Start(void)
  â””â”€ uint8_t DHT11_CheckResponse(void)
  â””â”€ uint8_t DHT11_ReadByte(void)

timer.h / timer.c :
  â””â”€ void Timer_Init(void)
  â””â”€ void Timer_Reset(void)
  â””â”€ uint32_t Timer_GetMicros(void)
  â””â”€ void Delay_us(uint32_t us)
  â””â”€ void Delay_ms(uint32_t ms)

main.c :
  â””â”€ int main(void)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PINOUT COMPLET                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            OLED I2C                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  VCC  â†’  3.3V                                                          â•‘
â•‘  GND  â†’  GND                                                           â•‘
â•‘  SCL  â†’  PB6 (I2C1_SCL) [AF4, Open-drain, Pull-up, High speed]        â•‘
â•‘  SDA  â†’  PB7 (I2C1_SDA) [AF4, Open-drain, Pull-up, High speed]        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              DHT11                                      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  VCC   â†’  3.3V                                                         â•‘
â•‘  DATA  â†’  PA0 [GPIO Input, Pull-up] + RÃ©sistance 4.7kÎ© vers 3.3V      â•‘
â•‘  NC    â†’  (non connectÃ©)                                               â•‘
â•‘  GND   â†’  GND                                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            ST-LINK V2                                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  3.3V  â†’  3.3V (optionnel si alimentation externe)                     â•‘
â•‘  SWDIO â†’  PA13 âš ï¸ RÃ‰SERVÃ‰ (ne pas utiliser pour autre chose)          â•‘
â•‘  SWCLK â†’  PA14 âš ï¸ RÃ‰SERVÃ‰ (ne pas utiliser pour autre chose)          â•‘
â•‘  GND   â†’  GND                                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          LED DEBUG                                      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  PC13  â†’  [LED] â†’ [330Î©] â†’ GND                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ORDRE D'INITIALISATION                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

int main(void) {
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // PHASE 1 : HORLOGES
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    GPIO_Init_Clocks();
        â””â”€ RCC->AHB1ENR |= GPIOAEN | GPIOBEN | GPIOCEN
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // PHASE 2 : GPIO
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    GPIO_Init_I2C_Pins();
        â””â”€ MODER, AFR, OTYPER, PUPDR, OSPEEDR pour PB6/PB7
    
    GPIO_Init_DHT11_Pin();
        â””â”€ MODER, PUPDR pour PA0
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // PHASE 3 : PÃ‰RIPHÃ‰RIQUES
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Timer_Init();
        â””â”€ RCC->APB1ENR, TIM2->PSC, ARR, CR1
    
    I2C_Init();
        â””â”€ RCC->APB1ENR, I2C1->CR2, CCR, TRISE, CR1
    
    LCD_Init();
        â””â”€ SÃ©quence init via I2C
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // PHASE 4 : BOUCLE PRINCIPALE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    while(1) {
        DHT11_Data data = DHT11_Read();
        
        LCD_Clear();
        LCD_SetCursor(0, 0);
        LCD_WriteString("Temp: ");
        LCD_WriteNumber(data.temp);
        LCD_WriteString("C");
        
        LCD_SetCursor(1, 0);
        LCD_WriteString("Hum: ");
        LCD_WriteNumber(data.humidity);
        LCD_WriteString("%");
        
        Delay_ms(2000);
    }
}

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CHECKLIST DÃ‰VELOPPEMENT                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Phase 1: GPIO & LED Test
  â–¡ GPIO_Init_Clocks() implÃ©mentÃ©
  â–¡ PC13 en OUTPUT, LED clignote
  â–¡ Hardware validÃ© (LED visible)

Phase 2: Timer Microsecond
  â–¡ Timer_Init() implÃ©mentÃ©
  â–¡ TIM2->CNT s'incrÃ©mente de 1 chaque Âµs
  â–¡ Delay_us() et Delay_ms() fonctionnels

Phase 3: I2C Communication
  â–¡ GPIO_Init_I2C_Pins() implÃ©mentÃ©
  â–¡ I2C_Init() configurÃ© (100 kHz)
  â–¡ I2C_Start/Write/Stop fonctionnels
  â–¡ I2C Scanner trouve 0x3C (OLED)

Phase 4: LCD Driver
  â–¡ LCD_Init() sÃ©quence correcte
  â–¡ LCD_WriteChar() fonctionne
  â–¡ LCD_WriteString("Hello") affiche correctement
  â–¡ LCD_Clear() efface l'Ã©cran

Phase 5: DHT11 Sensor
  â–¡ GPIO_Init_DHT11_Pin() implÃ©mentÃ©
  â–¡ DHT11_Start() envoie pulse 18ms
  â–¡ DHT11_ReadByte() mesure timing (26Âµs vs 70Âµs)
  â–¡ DHT11_Read() retourne tempÃ©rature/humiditÃ© valides
  â–¡ Checksum validÃ©

Phase 6: IntÃ©gration
  â–¡ Toutes les fonctions appelÃ©es dans main()
  â–¡ Boucle affiche tempÃ©rature en temps rÃ©el
  â–¡ RafraÃ®chissement toutes les 2 secondes
  â–¡ Code commentÃ© et structurÃ©
  â–¡ Photos prises pour portfolio

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              FIN                                        â•‘
â•‘                    Station MÃ©tÃ©o V1 - Architecture                      â•‘
â•‘                           CESI - 2026                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
